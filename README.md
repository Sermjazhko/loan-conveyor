# loan-conveyor
# Описание
Бэкенд-приложение с микросервисной архитектурой - прототип небольшого банка

Логика работы всей системы:

1. Пользователь отправляет заявку на кредит.
2. МС application осуществляет прескоринг заявки и если прескоринг проходит, то заявка сохраняется в МС deal и отправляется в МС conveyor.
3. Conveyor возвращает через МС deal пользователю 4 предложения (сущность "LoanOffer") по кредиту с разными условиями или отказ.
4. Пользователь выбирает одно из предложений, отправляется запрос в МС application, а оттуда в МС deal, где заявка на кредит и сам кредит сохраняются в базу.
5. МС deal отправляет клиенту письмо с текстом "Ваша заявка предварительно одобрена, завершите оформление".
6. Клиент отправляет запрос в МС deal со всеми своими полными данными о работодателе и прописке. Происходит скоринг данных в conveyor, conveyor рассчитывает все данные по кредиту (ПСК, график платежей и тд), МС deal сохраняет обновленную заявку и сущность кредит сделанную на основе CreditDTO полученного из conveyor со статусом CALCULATED в БД.
7. После валидации МС deal отправляет письмо на почту клиенту с одобрением или отказом. Если кредит одобрен, то в письме присутствует ссылка на запрос "Сформировать документы"
8. Клиент отправляет запрос на формирование документов в МС deal, МС deal отправляет клиенту на почту документы для подписания и ссылку на запрос на согласие с условиями.
9. Клиент может отказаться от условий или согласиться. Если согласился - МС deal на почту отправляет код и ссылку на подписание документов, куда клиент должен отправить полученный код в МС deal.
10. Если полученный код совпадает с отправленным, МС deal выдает кредит (меняет статус сущности "Кредит" на ISSUED, а статус заявки на CREDIT_ISSUED)

    
# Запуск docker-compose

```
docker-compose up -d
```

# Технологии и инструменты:

* Java
* Spring Boot
* Spring Data (PostgreSQL, Liquibase)
* Docker
* Apache Kafka
* JPA
* Swagger
* JUnit
* Lombok
